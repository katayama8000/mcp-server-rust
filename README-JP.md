# Cat Database MCP Server

Rustで実装されたModel Context Protocol (MCP) サーバーで、猫のデータベース管理システムを提供します。このサーバーにより、AIアシスタントやMCPクライアントが標準化されたプロトコルを通じて猫のデータとやり取りできます。

## 機能

- **猫データベース管理**: ID、名前、年齢、品種、色、室内飼い状況、お気に入りのおもちゃなどの猫の情報を保存・取得
- **複数のクエリツール**: 猫データにアクセスするための4つの異なるツール
- **MCPプロトコル準拠**: AIアシスタントとのシームレスな統合のためのModel Context Protocolの完全実装
- **非同期処理**: 効率的なノンブロッキング処理のためのTokioを使用
- **エラーハンドリング**: 適切なMCPエラーコードと構造化されたエラー応答

## 利用可能なツール

1. **`list_all_cats`** - 登録されているすべての猫の一覧を取得
   - パラメータ不要
   - 戻り値: すべての猫の詳細情報を含む完全なリスト

2. **`get_cat_by_id`** - 特定の猫の詳細情報を取得
   - パラメータ: `id` (数値) - 猫のID
   - 戻り値: 指定された猫の詳細情報

3. **`search_by_breed`** - 品種で猫を検索
   - パラメータ: `breed` (文字列) - 検索する品種名
   - 戻り値: 品種にマッチする猫のリスト（部分一致対応）

4. **`get_indoor_cats`** - 室内飼いの猫のみを取得
   - パラメータ不要
   - 戻り値: 室内で飼われている猫のリスト

## サンプルデータ

サーバーには4匹のサンプル猫が事前に登録されています：

- **Mike** (ID: 1) - 3歳の三毛猫、室内飼い、ネズミのおもちゃが好き
- **Shiro** (ID: 2) - 5歳のペルシャ猫、室内飼い、毛糸玉が好き
- **Kuro** (ID: 3) - 2歳の黒猫、外飼い、蝶々が好き
- **Chatora** (ID: 4) - 7歳の茶トラ猫、室内飼い、猫草が好き

## 必要条件

- Rust（最新安定版）
- Cargoパッケージマネージャ

## インストール・使用方法

1. **プロジェクトをクローンまたは作成**:
```bash
git clone <リポジトリURL>
cd mcp-server-rust
```

2. **プロジェクトをビルド**:
```bash
cargo build --release
```

3. **サーバーを実行**:
```bash
cargo run
```

サーバーが開始され、標準入力/出力（stdio）を通じてMCPプロトコルメッセージを待機します。

## MCP Inspectorでのテスト

MCP Inspectorツールを使用してこのサーバーをテストできます：

```bash
npx @modelcontextprotocol/inspector cargo run
```

これにより、インスペクターが起動し、猫データベースサーバーに自動的に接続されます。

## AIアシスタントとの統合

このサーバーは、MCPをサポートする様々なAIアシスタントと統合できます：

- **Claude Desktop**: Claude Desktopの設定にサーバー設定を追加
- **VS Code拡張機能**: MCP対応のVS Code拡張機能と併用
- **カスタムクライアント**: MCPプロトコルをサポートする任意のアプリケーションと統合

## 使用例

MCPクライアント経由で接続すると、以下のようなコマンドを使用できます：

```json
// すべての猫を取得
{"tool": "list_all_cats"}

// IDで特定の猫を取得
{"tool": "get_cat_by_id", "arguments": {"id": 1}}

// 品種で検索
{"tool": "search_by_breed", "arguments": {"breed": "Persian"}}

// 室内飼いの猫のみを取得
{"tool": "get_indoor_cats"}
```

## 開発

サーバーを変更または拡張するには：

1. `src/main.rs`を編集して新しい猫やツールを追加
2. `cargo check`を実行してコンパイルを確認
3. `cargo run`でテスト

## 依存関係

- `rmcp`: プロトコル実装用のRust MCP SDK
- `tokio`: 非同期ランタイム
- `serde`: シリアライゼーションフレームワーク
- `tracing`: 構造化ログ
- `anyhow`: エラーハンドリング

## ライセンス

MIT License - 詳細はLICENSEファイルを参照してください。
